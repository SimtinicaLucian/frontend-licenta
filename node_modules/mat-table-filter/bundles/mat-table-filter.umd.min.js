!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("@angular/core"),require("@angular/material/table"),require("rxjs"),require("rxjs/operators"),require("lodash"),require("util")):"function"==typeof define&&define.amd?define("mat-table-filter",["exports","@angular/core","@angular/material/table","rxjs","rxjs/operators","lodash","util"],t):t((e=e||self)["mat-table-filter"]={},e.ng.core,e.ng.material.table,e.rxjs,e.rxjs.operators,e.lodash,e.util)}(this,(function(e,t,r,i,n,o,a){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation. All rights reserved.
    Licensed under the Apache License, Version 2.0 (the "License"); you may not use
    this file except in compliance with the License. You may obtain a copy of the
    License at http://www.apache.org/licenses/LICENSE-2.0

    THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
    KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
    WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
    MERCHANTABLITY OR NON-INFRINGEMENT.

    See the Apache Version 2.0 License for specific language governing permissions
    and limitations under the License.
    ***************************************************************************** */var s=function(e,t){return(s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function p(e,t){function r(){this.constructor=e}s(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var u;function c(e,t,r,i){var n,o=arguments.length,a=o<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,r):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,r,i);else for(var s=e.length-1;s>=0;s--)(n=e[s])&&(a=(o<3?n(a):o>3?n(t,r,a):n(t,r))||a);return o>3&&a&&Object.defineProperty(t,r,a),a}function l(e,t){return function(r,i){t(r,i,e)}}function f(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function y(e){var t="function"==typeof Symbol&&e[Symbol.iterator],r=0;return t?t.call(e):{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}}}(u=e.MatTableFilter||(e.MatTableFilter={})).EQUALS="EQUALS",u.ANYWHERE="ANYWHERE",u.STARTS_WITH="STARTS_WITH",u.ENDS_WITH="ENDS_WITH";var d=function(){function t(){}return t.prototype.executeCondition=function(t,r){switch(this.handleLetterCasing(t,r.caseSensitive),r.filterType){case e.MatTableFilter.EQUALS:return this.equals(t);case e.MatTableFilter.ANYWHERE:return this.anywhere(t);case e.MatTableFilter.STARTS_WITH:return this.startsWith(t);case e.MatTableFilter.ENDS_WITH:return this.endsWith(t);default:return!0}},t.prototype.handleLetterCasing=function(e,t){t||this.transformAllLowerCase(e)},t.prototype.transformAllLowerCase=function(e){for(var t in e){var r=e[t];o.isString(r)?e[t]=r.toLowerCase():this.transformAllLowerCase(r)}},t}(),h=function(e){function r(){return e.call(this)||this}var i;return p(r,e),i=r,r.warn=function(){console.warn(i.UNSUPPORTED_OPERATION_WARNING),console.warn(i.SUGGESTION_WARNING)},r.prototype.equals=function(e){return o.isEqual(e.example.sort(),e.item.sort())},r.prototype.anywhere=function(e){return this.isSubset(e.example,e.item)},r.prototype.startsWith=function(e){return i.warn(),this.anywhere(e)},r.prototype.endsWith=function(e){return i.warn(),this.anywhere(e)},r.prototype.isSubset=function(e,t){return!o.difference(o.flatten(e),o.flatten(t)).length},r.UNSUPPORTED_OPERATION_WARNING="This filterType is unsupported for array filtering. FilterType.ANYWHERE is executed instead!",r.SUGGESTION_WARNING="You can set a custom predicate for the array property through PropertyOptions!",r.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new r},token:r,providedIn:"root"}),r=i=c([t.Injectable({providedIn:"root"}),f("design:paramtypes",[])],r)}(d),m=function(e){function r(){return e.call(this)||this}return p(r,e),r.prototype.equals=function(e){return e.example===e.item},r.prototype.anywhere=function(e){return e.item.includes(e.example)},r.prototype.startsWith=function(e){return e.item.startsWith(e.example)},r.prototype.endsWith=function(e){return e.item.endsWith(e.example)},r.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new r},token:r,providedIn:"root"}),r=c([t.Injectable({providedIn:"root"}),f("design:paramtypes",[])],r)}(d),b=function(){function e(e,t){this._alphaNumericService=e,this._arrayService=t}return e.prototype.filterPredicate=function(e,t,r,i){var n,s,p=Object.keys(e.example);try{for(var u=y(p),c=u.next();!c.done;c=u.next()){var l=c.value,f=o.cloneDeep(e.example[l]);if(!(o.isNil(f)||o.every(f,o.isEmpty)&&"boolean"!=typeof f)){if(!e.item.hasOwnProperty(l))return!1;var d=o.cloneDeep(e.item[l]),h=this.getNextPropertyName(i,l),m=this.finalizeOptionsForProperty(r,t,h);if(a.isFunction(m)){if(!m(d))return!1}else{var b=m;if(this.isAlphaNumeric(d)){var v={item:d.toString(),example:f};if(!this._alphaNumericService.executeCondition(v,b))return!1}else if(o.isArray(d)){v={item:d,example:f};if(!this._arrayService.executeCondition(v,b))return!1}else if(o.isBoolean(d)){if(d!==f)return!1}else{v={item:d,example:f};if(!this.filterPredicate(v,t,m,h))return!1}}}}}catch(e){n={error:e}}finally{try{c&&!c.done&&(s=u.return)&&s.call(u)}finally{if(n)throw n.error}}return!0},e.prototype.finalizeOptionsForProperty=function(e,t,r){return t&&t.hasOwnProperty(r)?t[r]:e},e.prototype.getNextPropertyName=function(e,t){return e?e+"."+t:t},e.prototype.isChanged=function(e,t){return!o.isEqual(this.toPlainJson(e),this.toPlainJson(t))},e.prototype.toPlainJson=function(e){return e?JSON.parse(JSON.stringify(e)):void 0},e.prototype.isAlphaNumeric=function(e){return o.isString(e)||o.isNumber(e)},e.ctorParameters=function(){return[{type:m},{type:h}]},e.ɵprov=t["ɵɵdefineInjectable"]({factory:function(){return new e(t["ɵɵinject"](m),t["ɵɵinject"](h))},token:e,providedIn:"root"}),e=c([t.Injectable({providedIn:"root"}),f("design:paramtypes",[m,h])],e)}(),v=function(){function o(t,r){this._filterService=t,this._table=r,this.debounceTime=400,this.filterType=e.MatTableFilter.ANYWHERE,this.caseSensitive=!1,this.initDebounceSubject()}return o.prototype.ngDoCheck=function(){this._filterService.isChanged(this._oldExampleEntity,this.exampleEntity)&&(this._oldExampleEntity=this._filterService.toPlainJson(this.exampleEntity),this._exampleEntitySubject.next(void 0))},o.prototype.initDebounceSubject=function(){var e=this;this._exampleEntitySubject=new i.BehaviorSubject(null),this._exampleEntitySubject.pipe(n.debounceTime(this.debounceTime)).subscribe((function(t){e.updateFilterPredicate()}))},o.prototype.updateFilterPredicate=function(){var e=this.getMatDataSource();e&&(e.filterPredicate=this.getFilterPredicate(),e.filter=this.exampleEntity)},o.prototype.getFilterPredicate=function(){var e=this;return this.customPredicate?this.customPredicate:function(t){return e._filterService.filterPredicate({example:e.exampleEntity,item:t},e.propertyOptions,{filterType:e.filterType,caseSensitive:e.caseSensitive})}},o.prototype.getMatDataSource=function(){return this._table.dataSource},o.ctorParameters=function(){return[{type:b},{type:r.MatTable,decorators:[{type:t.Host},{type:t.Self},{type:t.Optional}]}]},c([t.Input(),f("design:type",Object)],o.prototype,"exampleEntity",void 0),c([t.Input(),f("design:type",Object)],o.prototype,"debounceTime",void 0),c([t.Input(),f("design:type",String)],o.prototype,"filterType",void 0),c([t.Input(),f("design:type",Object)],o.prototype,"caseSensitive",void 0),c([t.Input(),f("design:type",Function)],o.prototype,"customPredicate",void 0),c([t.Input(),f("design:type",Object)],o.prototype,"propertyOptions",void 0),o=c([t.Directive({selector:"[matTableFilter]",exportAs:"matTableFilter"}),l(1,t.Host()),l(1,t.Self()),l(1,t.Optional()),f("design:paramtypes",[b,r.MatTable])],o)}(),S=function(){function e(){}return e=c([t.NgModule({declarations:[v],imports:[r.MatTableModule],exports:[v]})],e)}();e.MatTableFilterDirective=v,e.MatTableFilterModule=S,e.MatTableFilterService=b,e.ɵa=m,e.ɵb=d,e.ɵc=h,Object.defineProperty(e,"__esModule",{value:!0})}));
//# sourceMappingURL=mat-table-filter.umd.min.js.map